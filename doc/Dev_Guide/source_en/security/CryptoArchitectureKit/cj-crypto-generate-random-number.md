# Secure Random Number Generation

Random numbers are primarily used in scenarios such as temporary session key generation and key generation for asymmetric encryption algorithms. In cryptographic contexts, a secure random number generator must possess randomness, unpredictability, and non-repeatability. The random numbers generated by the current system meet the requirements of cryptographically secure pseudorandomness.

Developers can call APIs to achieve the following functionalities:

- Generate secure random numbers of specified lengths and use them to generate corresponding keys.
- Specify a random seed to generate a sequence of random numbers.

Before development, developers should have a basic understanding of cryptography fundamentals and be familiar with the following key concepts related to random numbers:

- **Internal State**

  Represents the numerical values stored in the memory of the random number generator. When the internal state is identical, the random number generator will produce the same sequence of random numbers.

- **Random Seed**

  A piece of data used to initialize the internal state of a pseudorandom number generator. The random number generator uses the seed to generate a sequence of random numbers.

  In the current OpenSSL implementation, the internal state of the random number generator is continuously changing. Even if the same seed is set, the generated random number sequences will differ.

## Supported Algorithms and Specifications

The random number generation algorithm uses OpenSSL's `RAND_priv_bytes` interface to generate secure random numbers.

| Algorithm | Length (Byte) |
| --------- | ------------- |
| CTR_DRBG  | [1, INT_MAX]  |

## Development Steps

1. Call [`createRandom`](../../../../API_Reference/source_en/apis/CryptoArchitectureKit/cj-apis-crypto.md#func-createrandom) to create a random number instance.

2. (Optional) Set `DataBlob` data and call [`setSeed`](../../../../API_Reference/source_en/apis/CryptoArchitectureKit/cj-apis-crypto.md#func-setseeddatablob) to seed the random number generator pool.

3. Specify the byte length and call [`generateRandom`](../../../../API_Reference/source_en/apis/CryptoArchitectureKit/cj-apis-crypto.md#func-generaterandomint32) to generate a secure random number.

   The specified byte length must be within the range of 1 to `INT_MAX`.

## Example

A synchronous method example is provided below:

<!-- compile -->

```cangjie
import kit.CryptoArchitectureKit.*
import ohos.base.BusinessException

func doRand() {
    let rand = createRandom()
    let len: Int32 = 24 // Generate a 24-byte random number.
    try {
        let randData = rand.generateRandom(len)
        AppLog.info("rand result: ${randData.data}")
    } catch (e: BusinessException) {
        AppLog.error("do rand failed, ${e.code}, ${e.message}")
    }
}
```